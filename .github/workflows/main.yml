name: CI

on:
  push:
    branches: [ master ]
  pull_request:
    branches: [ master ]

env:
  EMERGE_API_TOKEN: ${{ secrets.EMERGE_API_TOKEN }}
  PR_NUMBER: ${{ github.event.number }}

jobs:
  fastlane-upload:
    name: "Build Example App"
    runs-on: macos-13
    steps:
      - uses: actions/checkout@v2
      - uses: ./.github/actions/setup
        with:
          xcode: '14.3' # Swift 5.8
      - name: Build Example
        run: bundle exec fastlane emerge_upload
